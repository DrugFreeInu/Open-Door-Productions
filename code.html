<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>DFI Backstage Code — Fixed Scatter</title>

<style>
  html, body{
    margin:0;
    padding:0;
    background:#000;
    font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace;
  }

  /* ===== BACKGROUND AREA =====
     If you only want the LEFT black panel, keep width: 34vw.
     If you want full screen, change width to 100vw.
  */
  #dfi-code-stage{
    position: fixed;
    top: 0;
    left: 0;
    width: 34vw;     /* <-- change to 100vw if you want full screen */
    height: 100vh;
    background: #000;
    overflow: hidden;
    pointer-events: none;
    z-index: 0;
  }

  /* your content above */
  .content{
    position: relative;
    z-index: 1;
    min-height: 100vh;
  }

  .dfi-backstage-line{
    position: absolute !important; /* hard override to prevent “pinned” behavior */
    left: 0;
    top: 0;

    white-space: nowrap;
    user-select: none;
    pointer-events: none;

    color: rgba(235,245,255,0.92);
    text-shadow:
      0 0 6px rgba(180, 210, 255, 0.60),
      0 0 16px rgba(120, 170, 255, 0.35);

    opacity: 0;
    will-change: transform, opacity;
    animation: dfiDriftLR linear infinite;
    transform: translateX(0);
  }

  @keyframes dfiDriftLR{
    0%   { transform: translateX(0); opacity: 0; }
    10%  { opacity: 0.95; }
    90%  { opacity: 0.95; }
    100% { transform: translateX(var(--dfi-travel, 1600px)); opacity: 0; }
  }
</style>
</head>

<body>
  <div id="dfi-code-stage" aria-hidden="true"></div>

  <div class="content">
    <!-- your real site content here -->
  </div>

<script>
(() => {
  const stage = document.getElementById("dfi-code-stage");

  const snippets = [
    "requestAnimationFrame(loop)",
    "translateX(sceneX)",
    "ctx.clearRect(0,0,w,h)",
    "will-change: transform;",
    "pointer-events: none;",
    "overflow: hidden;",
    "let particles = []",
    "if (y > h) reset()",
    "z-index: 0;",
    "scene !== world",
    "backstage === true",
    "this is not reality",
    "render before meaning",
    "the door is open"
  ];

  function safeRect() {
    const r = stage.getBoundingClientRect();
    // Fallbacks prevent NaN/0-height issues that cause top-left stacking
    const w = Math.max(1, r.width || window.innerWidth);
    const h = Math.max(1, r.height || window.innerHeight);
    return { w, h };
  }

  function spawnLine(){
    const { w, h } = safeRect();

    const el = document.createElement("div");
    el.className = "dfi-backstage-line";
    el.textContent = snippets[(Math.random() * snippets.length) | 0];

    // Explicit pixel placement (prevents pile-up)
    const y = Math.floor(Math.random() * Math.max(1, (h - 24)));
    el.style.top = y + "px";

    // Start off-screen left in px
    const startX = - (80 + Math.random() * 260);
    el.style.left = startX + "px";

    // Travel across the stage width
    el.style.setProperty("--dfi-travel", (w + 520) + "px");

    // Variance
    el.style.fontSize = (12 + Math.random() * 10) + "px";
    el.style.animationDuration = (10 + Math.random() * 18) + "s";
    el.style.animationDelay = (-Math.random() * 8) + "s";

    stage.appendChild(el);
    setTimeout(() => el.remove(), 36000);
  }

  // Kickstart
  for (let i = 0; i < 16; i++) spawnLine();

  // Density
  setInterval(spawnLine, 170);
})();
</script>
</body>
</html>
